---
const { title } = Astro.props;
import "../styles/global.css";
import { SITE_EMAILS } from "../constants/constants";
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>{title} | Frigilux Venezuela</title>
    <script is:inline>
      const theme = (() => {
        if (typeof localStorage !== "undefined" && localStorage.getItem("theme"))
          return localStorage.getItem("theme");
        if (window.matchMedia("(prefers-color-scheme: dark)").matches)
          return "dark";
        return "light";
      })();
      document.documentElement.classList.toggle("dark", theme === "dark");
    </script>
  </head>

  <body class="bg-background text-foreground antialiased transition-colors duration-300 overflow-x-hidden relative">
    
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-[-1]">
      <div class="absolute -top-[10%] -left-[10%] w-[70%] md:w-[40%] h-[40%] bg-primary/10 blur-[80px] md:blur-[120px] rounded-full"></div>
      <div class="absolute top-[40%] -right-[5%] w-[50%] md:w-[30%] h-[50%] bg-primary/5 blur-[80px] md:blur-[100px] rounded-full"></div>
    </div>

    <header class="bg-primary text-white sticky top-0 z-50 shadow-lg">
      <div class="max-w-5xl mx-auto px-4 md:px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2 md:gap-3">
          <img
            src="/logo.png"
            alt="Logo Frigilux"
            class="h-7 md:h-9 w-auto object-contain brightness-0 invert"
            loading="eager"
          />
          <div class="w-px h-5 bg-white/20"></div>
          <h1 class="text-lg md:text-xl font-bold tracking-tighter">
            <span class="opacity-80">SGE</span>
          </h1>
        </div>

        <div class="flex items-center gap-2 md:gap-6">
          <nav class="hidden md:block">
            <ul class="flex gap-6 text-sm font-bold uppercase tracking-widest">
              <li><a href="/" class="hover:text-primary-pale transition-colors">Inicio</a></li>  
              <li><a href="/faqs" class="hover:text-primary-pale transition-colors">FAQs</a></li>
              <li><a href="/privacy" class="hover:text-primary-pale transition-colors">Privacidad</a></li>
              <li><a href="/terms" class="hover:text-primary-pale transition-colors">T√©rminos</a></li>
            </ul>
          </nav>

          <div class="flex items-center gap-1">
            <button
              id="theme-toggle"
              class="p-2.5 rounded-xl bg-white/10 border border-white/20 text-white hover:bg-white/20 transition-all active:scale-95"
            >
              <span class="hidden dark:block">‚òÄÔ∏è</span>
              <span class="block dark:hidden">üåô</span>
            </button>

            <button
              id="menu-btn"
              class="md:hidden p-2.5 rounded-xl bg-white/10 border border-white/20 text-white active:scale-95"
              aria-label="Menu"
            >
              <svg id="menu-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path id="path-1" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div id="mobile-menu" class="hidden md:hidden bg-primary border-t border-white/10 animate-fade-in-down">
        <nav class="px-6 py-8">
          <ul class="flex flex-col gap-6 text-center text-sm font-bold uppercase tracking-[0.2em]">
            <li><a href="/" class="block py-2 hover:text-primary-pale">Inicio</a></li>
            <li><a href="/faqs" class="block py-2 hover:text-primary-pale">Preguntas Frecuentes</a></li>
            <li><a href="/privacy" class="block py-2 hover:text-primary-pale">Privacidad</a></li>
            <li><a href="/terms" class="block py-2 hover:text-primary-pale">T√©rminos y Condiciones</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="mx-auto px-4 md:px-8 py-8 md:py-12 min-h-[70vh]">
      <slot />
    </main>

    <footer class="bg-componentbg border-t border-separator py-10 transition-colors duration-300">
      <div class="max-w-5xl mx-auto px-6 text-center md:text-left">
        <p class="text-[9px] text-muted-foreground uppercase tracking-[0.3em] mb-2">Developed by Javier Taborda</p>
        <p class="text-[10px] text-muted-foreground opacity-60 uppercase">&copy; {new Date().getFullYear()} Frigilux Venezuela.</p>
      </div>
    </footer>

    <style is:global>
      @keyframes fade-in-down {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in-down {
        animation: fade-in-down 0.3s ease-out forwards;
      }
    </style>

    <script>
      const setupNavigation = () => {
        const menuBtn = document.getElementById("menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");
        const themeToggle = document.getElementById("theme-toggle");

        // Toggle Menu
        menuBtn?.addEventListener("click", () => {
          mobileMenu?.classList.toggle("hidden");
        });

        // Close menu on link click
        mobileMenu?.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
        });

        // Theme Toggle
        themeToggle?.addEventListener("click", () => {
          const isDark = document.documentElement.classList.toggle("dark");
          localStorage.setItem("theme", isDark ? "dark" : "light");
        });
      };

      setupNavigation();
    </script>
  </body>
</html>